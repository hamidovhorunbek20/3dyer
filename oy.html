<!DOCTYPE html>
<html lang="uz">
  <head>
    <meta charset="UTF-8" />
    <title>3D Oy (Realistik)</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: #000205;
      }
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
    </style>
  </head>

  <body>
    <!-- Title -->
    <div class="absolute top-8 w-full text-center z-10 pointer-events-none">
      <h1
        class="text-white text-2xl font-light tracking-[0.4em] uppercase opacity-70"
      >
        Oy (Yer yo‘ldoshi)
      </h1>
    </div>

    <!-- Author -->
    <div class="fixed p-3 z-20">
      <h1
        class="text-white text-xl font-light tracking-[0.2em] uppercase opacity-60"
      >
        Hamidov Horunbek
      </h1>
    </div>

    <!-- 3D Scene -->
    <div id="globe-container" class="w-full h-screen"></div>

    <!-- Bottom Menu -->
    <div class="fixed bottom-6 left-0 w-full z-50 px-4">
      <div
        class="w-44 mx-auto bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-2 flex items-center justify-between no-scrollbar shadow-2xl"
      >
        <a
          href="index.html"
          class="flex flex-col items-center px-4 py-1 rounded-xl hover:bg-white/10 transition"
        >
          <span
            class="text-white/50 text-[10px] uppercase tracking-tighter"
            >Yer</span
          >
        </a>

        <a
          href="oy.html"
          class="flex flex-col items-center px-6 py-2 bg-white rounded-xl shadow-lg scale-105"
        >
          <span
            class="text-black font-bold text-[11px] uppercase tracking-tight"
            >Oy</span
          >
        </a>
      </div>
    </div>

    <!-- Script -->
    <script>
      let scene, camera, renderer, controls, moon;

      init();
      animate();

      function init() {
        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera(
          45,
          window.innerWidth / window.innerHeight,
          0.1,
          1000
        );
        camera.position.set(0, 0, 2.8);

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document
          .getElementById("globe-container")
          .appendChild(renderer.domElement);

        const textureLoader = new THREE.TextureLoader();

        // OY TEXTURALARI
        const moonTexture = textureLoader.load(
          "https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/moon_1024.jpg"
        );

        const normalMap = textureLoader.load(
          "https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/planets/earth_normal_2048.jpg"
        );

        const geometry = new THREE.SphereGeometry(1, 128, 128);

        const material = new THREE.MeshStandardMaterial({
          map: moonTexture,
          normalMap: normalMap,
          normalScale: new THREE.Vector2(0.7, 0.7),
          roughness: 0.95,
          metalness: 0.0,
          color: new THREE.Color("#d8d8d8"),
        });

        moon = new THREE.Mesh(geometry, material);
        scene.add(moon);

        // YORUG‘LIK
        scene.add(new THREE.AmbientLight(0xffffff, 0.25));

        const sunLight = new THREE.DirectionalLight(0xffffff, 2);
        sunLight.position.set(6, 3, 5);
        scene.add(sunLight);

        const rimLight = new THREE.DirectionalLight(0x8899ff, 0.4);
        rimLight.position.set(-5, -2, -5);
        scene.add(rimLight);

        // YULDUZLAR
        const starsGeometry = new THREE.BufferGeometry();
        const starsMaterial = new THREE.PointsMaterial({
          color: 0xffffff,
          size: 0.008,
        });

        const starsVertices = [];
        for (let i = 0; i < 12000; i++) {
          starsVertices.push(
            (Math.random() - 0.5) * 30,
            (Math.random() - 0.5) * 30,
            (Math.random() - 0.5) * 30
          );
        }

        starsGeometry.setAttribute(
          "position",
          new THREE.Float32BufferAttribute(starsVertices, 3)
        );
        scene.add(new THREE.Points(starsGeometry, starsMaterial));

        // CONTROLS
        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.rotateSpeed = 0.5;
        controls.minDistance = 1.5;
        controls.maxDistance = 6;
        
        window.addEventListener("resize", onWindowResize);
      }

      function animate() {
        requestAnimationFrame(animate);
        moon.rotation.y += 0.0012; // Sekin aylanish
        controls.update();
        renderer.render(scene, camera);
      }

      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }
    </script>
  </body>
</html>
